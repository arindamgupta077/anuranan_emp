# Anuranan Frontend

Next.js + TypeScript frontend for Anuranan Employee Portal.

## Quick Start

### Install Dependencies
```powershell
npm install
```

### Configure Environment
Copy `.env.local.example` to `.env.local` and fill in your configuration.

### Run Development Server
```powershell
npm run dev
```

App will start on `http://localhost:3000`

### Build for Production
```powershell
npm run build
npm start
```

## Project Structure

```
frontend/
├── pages/
│   ├── _app.tsx           # App wrapper with global state
│   ├── _document.tsx      # HTML document structure
│   ├── index.tsx          # Landing/redirect page
│   ├── login.tsx          # Login page
│   ├── dashboard.tsx      # Main dashboard
│   ├── tasks/
│   │   └── index.tsx      # Task management page
│   ├── self-tasks/
│   │   └── index.tsx      # Self task logging
│   ├── leaves/
│   │   └── index.tsx      # Leave management
│   ├── admin/
│   │   └── index.tsx      # Admin panel (CEO only)
│   └── reports/
│       └── index.tsx      # Reports & analytics
├── components/            # Reusable React components
│   ├── Layout.tsx         # Main layout with navigation
│   ├── TaskList.tsx       # Task list component
│   ├── TaskForm.tsx       # Task creation form
│   ├── Navbar.tsx         # Navigation bar
│   └── ProtectedRoute.tsx # Route protection wrapper
├── lib/
│   ├── supabaseClient.ts  # Supabase client setup
│   └── api.ts             # API client with interceptors
├── store/
│   └── authStore.ts       # Zustand auth state
├── styles/
│   └── globals.css        # Global styles with Tailwind
├── public/
│   ├── manifest.json      # PWA manifest
│   ├── icons/             # App icons (various sizes)
│   ├── favicon.ico        # Favicon
│   └── robots.txt         # SEO robots file
├── package.json
├── tsconfig.json
├── next.config.js         # Next.js + PWA configuration
├── tailwind.config.js     # Tailwind CSS configuration
└── postcss.config.js      # PostCSS configuration
```

## Key Features

### Authentication
- Supabase Auth integration
- Persistent sessions with localStorage
- Auto token refresh
- Redirect to login when unauthorized

### State Management
- **Zustand** for auth state (user, employee, isCEO)
- Persisted to localStorage
- Lightweight and performant

### API Client
- Axios with interceptors
- Automatic token injection
- Error handling and redirects
- Type-safe API methods

### PWA Support
- Service worker for offline caching
- Manifest for installability
- App icons for all platforms
- Splash screens

### Responsive Design
- Mobile-first approach
- Tailwind CSS utility classes
- Optimized for tablets and desktops
- Touch-friendly UI

## Pages & Routes

| Route | Description | Access |
|-------|-------------|--------|
| `/` | Landing page | Public |
| `/login` | Login page | Public |
| `/dashboard` | Main dashboard | Authenticated |
| `/tasks` | Task management | Authenticated |
| `/self-tasks` | Self task logging | Authenticated |
| `/leaves` | Leave management | Authenticated |
| `/admin` | Admin panel | CEO only |
| `/reports` | Analytics & reports | CEO only |

## Components

### Layout Components
- `Layout` - Main layout with nav and sidebar
- `Navbar` - Top navigation bar
- `Sidebar` - Side navigation
- `ProtectedRoute` - Wraps pages requiring auth

### Feature Components
- `TaskList` - Display list of tasks with filters
- `TaskForm` - Create/edit task form
- `TaskCard` - Individual task display
- `StatusBadge` - Task status badge
- `DatePicker` - Date selection component
- `Modal` - Reusable modal dialog
- `ConfirmDialog` - Confirmation prompt
- `LoadingSpinner` - Loading indicator

## Styling

### Tailwind CSS
Custom theme with brand colors:
- Primary: Teal (#14b8a6)
- Secondary: Purple (#a855f7)

### Utility Classes
Pre-built component classes:
- `.btn`, `.btn-primary`, `.btn-secondary`
- `.input` - Form inputs
- `.card` - Card container
- `.badge-*` - Status badges

### Dark Mode
Supports system preference for dark mode (optional).

## Environment Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase project URL | `https://xxx.supabase.co` |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Supabase anon key | `eyJhbGci...` |
| `NEXT_PUBLIC_API_URL` | Backend API URL | `http://localhost:4000` |
| `NEXT_PUBLIC_APP_NAME` | App name | `Anuranan Employee Portal` |
| `NEXT_PUBLIC_APP_URL` | Frontend URL | `http://localhost:3000` |

## PWA Configuration

### Manifest (`public/manifest.json`)
Defines app metadata, icons, and display mode.

### Service Worker
Automatically generated by `next-pwa`:
- Caches static assets
- Caches API responses
- Offline fallback

### Icons Required
Place in `public/icons/`:
- `icon-72x72.png`
- `icon-96x96.png`
- `icon-128x128.png`
- `icon-144x144.png`
- `icon-152x152.png`
- `icon-192x192.png`
- `icon-384x384.png`
- `icon-512x512.png`

## Performance Optimizations

### Next.js Features
- **Server-Side Rendering (SSR)** - Fast initial load
- **Static Generation (SSG)** - Pre-rendered pages
- **Image Optimization** - Automatic image optimization
- **Code Splitting** - Smaller bundle sizes
- **Prefetching** - Preload page resources

### Custom Optimizations
- Lazy loading components
- Debounced search inputs
- Pagination for large lists
- Memoized expensive computations
- Optimistic UI updates

### Bundle Size
- Production build ~200KB gzipped
- Minimal dependencies
- Tree-shaking enabled
- CSS purged in production

## Development

### Running Locally
```powershell
npm run dev
```

### Type Checking
```powershell
npm run type-check
```

### Linting
```powershell
npm run lint
```

### Building
```powershell
npm run build
```

### Preview Production Build
```powershell
npm run build
npm start
```

## Deployment

### Vercel (Recommended)
```powershell
npm i -g vercel
vercel
```

Set environment variables in Vercel dashboard:
- All `NEXT_PUBLIC_*` variables
- Update `NEXT_PUBLIC_API_URL` to production backend

### Netlify
```powershell
npm run build
# Upload 'out' directory to Netlify
```

### Custom Server
```powershell
npm run build
npm start
# Use PM2 or similar for process management
```

## Browser Support

- Chrome/Edge (latest)
- Firefox (latest)
- Safari (latest)
- Mobile browsers (iOS Safari, Chrome Mobile)

## Accessibility

- Semantic HTML
- ARIA labels
- Keyboard navigation
- Screen reader support
- Focus indicators
- Color contrast compliance

## SEO

- Meta tags
- Open Graph tags
- robots.txt
- sitemap.xml (optional)

## Testing

### Unit Tests (Jest)
```powershell
npm test
```

### E2E Tests (Playwright)
```powershell
npm run test:e2e
```

## Troubleshooting

### Build Errors
```powershell
rm -rf .next node_modules
npm install
npm run build
```

### PWA Not Installing
- Ensure HTTPS (or localhost)
- Check manifest.json is accessible
- Clear browser cache
- Check service worker registration

### TypeScript Errors
```powershell
npm run type-check
```

## Support

For issues or questions, please open an issue on GitHub.
